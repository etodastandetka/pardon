# Инструкция по настройке DNS для pardon.su

## Проблема
Certbot выдает ошибку `NXDOMAIN` - это означает, что DNS записи для домена `pardon.su` не настроены или не указывают на IP вашего сервера.

## Решение

### 1. Узнайте IP адрес вашего сервера

На сервере выполните:
```bash
curl ifconfig.me
```

Или:
```bash
hostname -I
```

Запишите полученный IP адрес (например: `185.123.45.67`)

### 2. Настройте DNS записи

Зайдите в панель управления вашего регистратора домена (где вы купили `pardon.su`) и найдите раздел "DNS записи", "DNS Management" или "Управление DNS".

#### Добавьте A запись для основного домена:

**Вариант 1 (если есть поле "Имя"):**
- **Тип:** `A`
- **Имя/Хост:** `@` или `pardon.su` (или оставьте пустым)
- **Значение/IP:** `ВАШ_IP_АДРЕС` (например: `185.123.45.67`)
- **TTL:** `3600` или `Автоматически`

**Вариант 2 (если нет поля "Имя"):**
- Просто добавьте A запись с IP адресом вашего сервера

#### Добавьте A запись для www поддомена:

- **Тип:** `A`
- **Имя/Хост:** `www`
- **Значение/IP:** `ВАШ_IP_АДРЕС` (тот же IP, что и выше)
- **TTL:** `3600`

### 3. Проверьте DNS записи

Подождите 5-30 минут (иногда до 24 часов, но обычно быстрее) и проверьте:

```bash
# На сервере или локально
dig pardon.su +short
# Должен вернуть ваш IP адрес

dig www.pardon.su +short
# Должен вернуть ваш IP адрес

# Или используйте nslookup
nslookup pardon.su
nslookup www.pardon.su
```

**Важно:** Certbot не сможет получить сертификат, пока DNS записи не будут настроены и не начнут работать!

### 4. После настройки DNS

Когда DNS записи заработают (проверка выше возвращает ваш IP), выполните:

```bash
sudo certbot --nginx -d pardon.su -d www.pardon.su
```

### 5. Альтернативный способ (если DNS еще не работает)

Если нужно запустить сайт без HTTPS пока настраиваете DNS:

1. Временно закомментируйте редирект на HTTPS в nginx.conf:
```nginx
# return 301 https://$server_name$request_uri;
```

2. Раскомментируйте временную HTTP конфигурацию в конце nginx.conf

3. Перезагрузите Nginx:
```bash
sudo nginx -t
sudo systemctl reload nginx
```

4. После настройки DNS получите сертификат и верните HTTPS конфигурацию.

## Популярные регистраторы доменов

- **Reg.ru** - раздел "DNS-серверы и зона"
- **Namecheap** - раздел "Advanced DNS"
- **GoDaddy** - раздел "DNS Management"
- **Cloudflare** - раздел "DNS"

## Проверка DNS онлайн

Можно проверить DNS записи онлайн:
- https://dnschecker.org/
- https://www.whatsmydns.net/

Введите `pardon.su` и выберите тип записи `A` - должны увидеть ваш IP адрес.

